<!DOCTYPE html>
<html lang="ru">
<head>
  <meta charset="UTF-8" />
  <meta name="viewport" content="width=device-width, initial-scale=1.0" />
  <title>EnergoGidBot</title>
  <script src="https://telegram.org/js/telegram-web-app.js"></script>
  <style>
    :root {
      --tg-theme-bg-color: var(--tg-theme-bg-color, #ffffff);
      --tg-theme-text-color: var(--tg-theme-text-color, #000000);
      --tg-theme-button-color: var(--tg-theme-button-color, #2481cc);
    }

    body {
      font-family: -apple-system, BlinkMacSystemFont, "Segoe UI", Roboto, sans-serif;
      background: var(--tg-theme-bg-color);
      color: var(--tg-theme-text-color);
      margin: 0;
      min-height: 100vh;
      display: flex;
      flex-direction: column;
      overflow-x: hidden; /* –ü—Ä–µ–¥–æ—Ç–≤—Ä–∞—â–∞–µ–º –≥–æ—Ä–∏–∑–æ–Ω—Ç–∞–ª—å–Ω—É—é –ø—Ä–æ–∫—Ä—É—Ç–∫—É */
    }

    header {
      text-align: center;
      padding: 20px 10px;
      max-width: 400px;
      margin: 0 auto;
    }

    header h1 {
      font-size: 22px;
      margin: 0;
    }

    header p {
      font-size: 14px;
      color: gray;
      margin: 5px 0 0;
    }

    .grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: 12px;
      padding: 0 20px;
      max-width: 400px;
      margin: 0 auto;
    }

    .tile {
      background: #f5f5f5;
      border-radius: 12px;
      border: none;
      padding: 25px 10px;
      text-align: center;
      font-size: 16px;
      display: flex;
      flex-direction: column;
      align-items: center;
      justify-content: center;
      cursor: pointer;
      transition: background 0.2s;
    }

    .tile:hover {
      background: #e8e8e8;
    }

    .tile span {
      font-size: 34px;
      margin-bottom: 8px;
    }

    nav {
      position: fixed;
      bottom: 0;
      left: 0;
      right: 0;
      display: flex;
      justify-content: space-around;
      border-top: 1px solid #ddd;
      padding: 10px 0;
      background: #fafafa;
      z-index: 1000;
    }

    /* –î–æ–±–∞–≤–ª—è–µ–º –æ—Ç—Å—Ç—É–ø —Å–Ω–∏–∑—É –¥–ª—è –∫–æ–Ω—Ç–µ–Ω—Ç–∞, —á—Ç–æ–±—ã –æ–Ω –Ω–µ –ø–µ—Ä–µ–∫—Ä—ã–≤–∞–ª—Å—è –Ω–∞–≤–∏–≥–∞—Ü–∏–µ–π */
    .page {
      padding-bottom: 80px; /* –û—Ç—Å—Ç—É–ø –¥–ª—è —Ñ–∏–∫—Å–∏—Ä–æ–≤–∞–Ω–Ω–æ–π –Ω–∞–≤–∏–≥–∞—Ü–∏–∏ */
    }

    nav button {
      background: none;
      border: none;
      font-size: 13px;
      color: gray;
      display: flex;
      flex-direction: column;
      align-items: center;
      gap: 3px;
      flex: 1;
      justify-content: center;
      padding: 8px;
      cursor: pointer;
    }

    nav button.active {
      color: var(--tg-theme-button-color);
    }

    nav button span {
      font-size: 18px;
    }

    /* ====== –í—Ç–æ—Ä–æ–π —ç–∫—Ä–∞–Ω ====== */
    .page {
      display: none;
      flex: 1;
      flex-direction: column;
      padding: 10px 20px;
    }

    .page.active {
      display: flex;
    }

    .page h2 {
      text-align: center;
      font-size: 20px;
      margin-bottom: 15px;
      max-width: 400px;
      margin-left: auto;
      margin-right: auto;
    }

    .list button {
      width: 100%;
      background: #f5f5f5;
      border: none;
      border-radius: 10px;
      padding: 14px;
      text-align: left;
      font-size: 15px;
      margin-bottom: 10px;
      cursor: pointer;
    }

    .list button:hover {
      background: #e8e8e8;
    }

    .question {
      text-align: left;
      margin-bottom: 15px;
      font-weight: bold;
    }

    .answers button {
      width: 100%;
      padding: 12px;
      font-size: 15px;
      border-radius: 8px;
      margin-bottom: 8px;
      border: none;
      background: #f5f5f5;
      text-align: left;
      cursor: pointer;
      transition: background 0.2s;
    }

    .answers button:hover {
      background: #e8e8e8;
    }

    .correct {
      background: #b6f3b1 !important;
    }

    .wrong {
      background: #f5b1b1 !important;
    }
  </style>
</head>
<body>
  <!-- === –ì–ª–∞–≤–Ω—ã–π —ç–∫—Ä–∞–Ω === -->
  <div id="home" class="page active">
    <header>
      <h1>EnergoGidBot</h1>
      <p>–í–∞—à –ø–æ–º–æ—â–Ω–∏–∫ –≤ —ç–Ω–µ—Ä–≥–µ—Ç–∏–∫–µ</p>
    </header>

    <main>
      <div class="grid">
        <button class="tile" onclick="openSection('profession')">
          <span>üë∑</span> –ü—Ä–æ—Ñ–µ—Å—Å–∏—è
        </button>
        <button class="tile" onclick="openSection('connection')">
          <span>‚ö°</span> –ü—Ä–∏—Å–æ–µ–¥–∏–Ω–µ–Ω–∏–µ
        </button>
        <button class="tile" onclick="openSection('contract')">
          <span>üìÑ</span> –î–æ–≥–æ–≤–æ—Ä
        </button>
        <button class="tile" onclick="openSection('operation')">
          <span>üõ†Ô∏è</span> –≠–∫—Å–ø–ª—É–∞—Ç–∞—Ü–∏—è
        </button>
      </div>
    </main>

    <nav>
      <button class="active"><span>üè†</span> –ì–ª–∞–≤–Ω–∞—è</button>
      <button><span>üìö</span> –ö—É—Ä—Å—ã</button>
      <button><span>üìä</span> –ö–∞–ª—å–∫—É–ª—è—Ç–æ—Ä—ã</button>
      <button><span>‚öôÔ∏è</span> –ù–∞—Å—Ç—Ä–æ–π–∫–∏</button>
    </nav>
  </div>

  <!-- === –≠–∫—Ä–∞–Ω "–ü—Ä–æ—Ñ–µ—Å—Å–∏—è" === -->
  <div id="profession" class="page">
    <h2>üë∑ –ü—Ä–æ—Ñ–µ—Å—Å–∏—è —ç–Ω–µ—Ä–≥–µ—Ç–∏–∫</h2>
    <div class="list">
      <button onclick="openSection('group')">‚ö° –ì—Ä—É–ø–ø–∞ –ø–æ —ç–ª–µ–∫—Ç—Ä–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏</button>
      <button>üìò –ü–æ–¥–≥–æ—Ç–æ–≤–∫–∞</button>
      <button>üßØ –û—Ö—Ä–∞–Ω–∞ —Ç—Ä—É–¥–∞</button>
      <button>üõ°Ô∏è –¢–µ—Ö–Ω–∏–∫–∞ –±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏</button>
      <button>üßæ –°–æ—Å—Ç–∞–≤–ª–µ–Ω–∏–µ —Ä–µ–∑—é–º–µ</button>
    </div>
  </div>

  <!-- === –ì—Ä—É–ø–ø–∞ –ø–æ —ç–ª–µ–∫—Ç—Ä–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏ === -->
  <div id="group" class="page">
    <h2>‚ö° –ì—Ä—É–ø–ø–∞ –ø–æ —ç–ª–µ–∫—Ç—Ä–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏</h2>
    <div class="list" id="groupList"></div>
  </div>

  <!-- === –ü–æ–¥—Ä–∞–∑–¥–µ–ª—ã (–ë–∏–ª–µ—Ç—ã/–≠–∫–∑–∞–º–µ–Ω/–ú–∞—Ä–∞—Ñ–æ–Ω) === -->
  <div id="subsectionPage" class="page">
    <h2 id="subsectionTitle"></h2>
    <div class="list" id="subsectionList"></div>
  </div>

  <!-- === –≠–∫—Ä–∞–Ω –≤–æ–ø—Ä–æ—Å–∞ === -->
  <div id="questionPage" class="page">
    <h2 id="questionTitle"></h2>
    <div class="question" id="questionText"></div>
    <div class="answers" id="answersContainer"></div>
  </div>

  <script>
    const tg = window.Telegram.WebApp;
    tg.expand();

    const pages = {
      home: document.getElementById("home"),
      profession: document.getElementById("profession"),
      group: document.getElementById("group"),
      subsection: document.getElementById("subsectionPage"),
      question: document.getElementById("questionPage")
    };

    const questions = [
      {
        title: "‚ö° I –≥—Ä—É–ø–ø–∞",
        question: "–ß—Ç–æ –¥–æ–ª–∂–µ–Ω –∑–Ω–∞—Ç—å —Ä–∞–±–æ—Ç–Ω–∏–∫, –∏–º–µ—é—â–∏–π I –≥—Ä—É–ø–ø—É –ø–æ —ç–ª–µ–∫—Ç—Ä–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏?",
        answers: [
          "–ü—Ä–∞–≤–∏–ª–∞ –¥–æ–ø—É—Å–∫–∞ –∫ —Ä–∞–±–æ—Ç–µ –≤ —ç–ª–µ–∫—Ç—Ä–æ—É—Å—Ç–∞–Ω–æ–≤–∫–∞—Ö.",
          "–û—Å–Ω–æ–≤–Ω—ã–µ –º–µ—Ä—ã –ø–µ—Ä–≤–æ–π –ø–æ–º–æ—â–∏ –ø—Ä–∏ –ø–æ—Ä–∞–∂–µ–Ω–∏–∏ —ç–ª–µ–∫—Ç—Ä–∏—á–µ—Å–∫–∏–º —Ç–æ–∫–æ–º.",
          "–°—Ö–µ–º—ã –∏ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ —ç–ª–µ–∫—Ç—Ä–æ—É—Å—Ç–∞–Ω–æ–≤–æ–∫.",
          "–ü–æ—Ä—è–¥–æ–∫ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –Ω–∞—Ä—è–¥–∞-–¥–æ–ø—É—Å–∫–∞."
        ],
        correct: 1
      },
      {
        title: "‚ö° II –≥—Ä—É–ø–ø–∞",
        question: "–ö–∞–∫–∏–µ –¥–µ–π—Å—Ç–≤–∏—è –Ω–µ–æ–±—Ö–æ–¥–∏–º–æ –≤—ã–ø–æ–ª–Ω–∏—Ç—å –ø–µ—Ä–µ–¥ –Ω–∞—á–∞–ª–æ–º —Ä–∞–±–æ—Ç—ã –Ω–∞ —ç–ª–µ–∫—Ç—Ä–æ—É—Å—Ç–∞–Ω–æ–≤–∫–µ –¥–æ 1000 –í?",
        answers: [
          "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –Ω–∞–ª–∏—á–∏–µ –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞ –∏ –∏—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç—å –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è.",
          "–°–Ω—è—Ç—å –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –µ–≥–æ –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ, –∑–∞–∑–µ–º–ª–∏—Ç—å —Ç–æ–∫–æ–≤–µ–¥—É—â–∏–µ —á–∞—Å—Ç–∏ –∏ –≤—ã–≤–µ—Å–∏—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–∂–¥–∞—é—â–∏–µ –ø–ª–∞–∫–∞—Ç—ã.",
          "–£–±–µ–¥–∏—Ç—å—Å—è, —á—Ç–æ –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏–µ —Ä–∞–±–æ—Ç–∞–µ—Ç –≤ –Ω–æ—Ä–º–∞–ª—å–Ω–æ–º —Ä–µ–∂–∏–º–µ.",
          "–ü–æ—Å—Ç–∞–≤–∏—Ç—å –æ–≥—Ä–∞–∂–¥–µ–Ω–∏—è –≤–æ–∫—Ä—É–≥ —ç–ª–µ–∫—Ç—Ä–æ—É—Å—Ç–∞–Ω–æ–≤–∫–∏."
        ],
        correct: 1
      },
      {
        title: "‚ö° III –≥—Ä—É–ø–ø–∞",
        question: "–ö–∞–∫–æ–π –ø–æ—Ä—è–¥–æ–∫ –¥–æ–ª–∂–µ–Ω –±—ã—Ç—å —Å–æ–±–ª—é–¥—ë–Ω –ø—Ä–∏ –ø–æ–¥–≥–æ—Ç–æ–≤–∫–µ —Ä–∞–±–æ—á–µ–≥–æ –º–µ—Å—Ç–∞ –≤ —ç–ª–µ–∫—Ç—Ä–æ—É—Å—Ç–∞–Ω–æ–≤–∫–µ –≤—ã—à–µ 1000 –í?",
        answers: [
          "–°–Ω—è—Ç—å –Ω–∞–ø—Ä—è–∂–µ–Ω–∏–µ, –ø—Ä–æ–≤–µ—Ä–∏—Ç—å –æ—Ç—Å—É—Ç—Å—Ç–≤–∏–µ –Ω–∞–ø—Ä—è–∂–µ–Ω–∏—è, –∑–∞–∑–µ–º–ª–∏—Ç—å —Ç–æ–∫–æ–≤–µ–¥—É—â–∏–µ —á–∞—Å—Ç–∏.",
          "–ü—Ä–æ–≤–µ—Ä–∏—Ç—å –∏—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç—å –æ–±–æ—Ä—É–¥–æ–≤–∞–Ω–∏—è –∏ —Ä–∞–∑—Ä–µ—à–∏—Ç—å —Ä–∞–±–æ—Ç—É.",
          "–ü–æ—Å—Ç–∞–≤–∏—Ç—å –ø—Ä–µ–¥—É–ø—Ä–µ–¥–∏—Ç–µ–ª—å–Ω—ã–µ –∑–Ω–∞–∫–∏ –∏ –¥–æ–ø—É—Å—Ç–∏—Ç—å –ø–µ—Ä—Å–æ–Ω–∞–ª –∫ —Ä–∞–±–æ—Ç–µ.",
          "–ü—Ä–æ–≤–µ—Å—Ç–∏ –∏–Ω—Å—Ç—Ä—É–∫—Ç–∞–∂ –∏ —É—Å—Ç–∞–Ω–æ–≤–∏—Ç—å –≤—Ä–µ–º–µ–Ω–Ω—ã–µ –æ–≥—Ä–∞–∂–¥–µ–Ω–∏—è."
        ],
        correct: 0
      },
      {
        title: "‚ö° IV –≥—Ä—É–ø–ø–∞",
        question: "–ö–∞–∫–∏–µ –∑–Ω–∞–Ω–∏—è –¥–æ–ª–∂–µ–Ω –∏–º–µ—Ç—å —Ä–∞–±–æ—Ç–Ω–∏–∫ —Å IV –≥—Ä—É–ø–ø–æ–π –ø–æ —ç–ª–µ–∫—Ç—Ä–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏?",
        answers: [
          "–¢–æ–ª—å–∫–æ —É—Å—Ç—Ä–æ–π—Å—Ç–≤–æ —ç–ª–µ–∫—Ç—Ä–æ—É—Å—Ç–∞–Ω–æ–≤–æ–∫.",
          "–û—Å–Ω–æ–≤–Ω—ã–µ –ø—Ä–∞–≤–∏–ª–∞ —Ä–∞–±–æ—Ç—ã —Å –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–æ–º.",
          "–£—Å—Ç—Ä–æ–π—Å—Ç–≤–æ —ç–ª–µ–∫—Ç—Ä–æ—É—Å—Ç–∞–Ω–æ–≤–æ–∫, —Å—Ö–µ–º—ã, –ø–æ—Ä—è–¥–æ–∫ –ø–µ—Ä–µ–∫–ª—é—á–µ–Ω–∏–π, –¥–æ–ø—É—Å–∫ –∫ —Ä–∞–±–æ—Ç–∞–º, –æ–∫–∞–∑–∞–Ω–∏–µ –ø–µ—Ä–≤–æ–π –ø–æ–º–æ—â–∏.",
          "–¢–æ–ª—å–∫–æ –ø–æ—Ä—è–¥–æ–∫ –æ—Ñ–æ—Ä–º–ª–µ–Ω–∏—è –Ω–∞—Ä—è–¥–æ–≤-–¥–æ–ø—É—Å–∫–æ–≤."
        ],
        correct: 2
      },
      {
        title: "‚ö° V –≥—Ä—É–ø–ø–∞",
        question: "–ö–∞–∫–∏–µ –æ–±—è–∑–∞–Ω–Ω–æ—Å—Ç–∏ –≤–æ–∑–ª–∞–≥–∞—é—Ç—Å—è –Ω–∞ —Ä–∞–±–æ—Ç–Ω–∏–∫–∞ —Å V –≥—Ä—É–ø–ø–æ–π –ø–æ —ç–ª–µ–∫—Ç—Ä–æ–±–µ–∑–æ–ø–∞—Å–Ω–æ—Å—Ç–∏?",
        answers: [
          "–í—ã–ø–æ–ª–Ω—è—Ç—å —É–∫–∞–∑–∞–Ω–∏—è —Ä—É–∫–æ–≤–æ–¥–∏—Ç–µ–ª—è.",
          "–ö–æ–Ω—Ç—Ä–æ–ª–∏—Ä–æ–≤–∞—Ç—å —Å–æ—Å—Ç–æ—è–Ω–∏–µ —ç–ª–µ–∫—Ç—Ä–æ—É—Å—Ç–∞–Ω–æ–≤–æ–∫, –æ—Ä–≥–∞–Ω–∏–∑–æ–≤—ã–≤–∞—Ç—å –±–µ–∑–æ–ø–∞—Å–Ω–æ–µ –ø—Ä–æ–≤–µ–¥–µ–Ω–∏–µ —Ä–∞–±–æ—Ç –∏ –æ–±—É—á–µ–Ω–∏–µ –ø–µ—Ä—Å–æ–Ω–∞–ª–∞.",
          "–¢–æ–ª—å–∫–æ –¥–æ–ø—É—Å–∫–∞—Ç—å –∫ —Ä–∞–±–æ—Ç–µ –æ–ø–µ—Ä–∞—Ç–∏–≤–Ω—ã–π –ø–µ—Ä—Å–æ–Ω–∞–ª.",
          "–°–ª–µ–¥–∏—Ç—å –∑–∞ –∏—Å–ø—Ä–∞–≤–Ω–æ—Å—Ç—å—é –∏–Ω—Å—Ç—Ä—É–º–µ–Ω—Ç–∞."
        ],
        correct: 1
      }
    ];

    // —Å–æ–∑–¥–∞—Ç—å —Å–ø–∏—Å–æ–∫ –≥—Ä—É–ø–ø
    const groupList = document.getElementById("groupList");
    questions.forEach((q, i) => {
      const btn = document.createElement("button");
      btn.textContent = q.title;
      btn.onclick = () => openSubsections(i);
      groupList.appendChild(btn);
    });

    function showPage(name) {
      Object.values(pages).forEach(p => p.classList.remove("active"));
      pages[name].classList.add("active");
    }

    function openSection(section) {
      if (section === "profession") {
        showPage("profession");
        tg.BackButton.show();
      } else if (section === "group") {
        showPage("group");
        tg.BackButton.show();
      } else {
        tg.sendData(JSON.stringify({ section }));
      }
    }

    // –û—Ç–∫—Ä—ã—Ç—å –ø–æ–¥—Ä–∞–∑–¥–µ–ª—ã –≥—Ä—É–ø–ø—ã
    function openSubsections(index) {
      const q = questions[index];
      showPage("subsection");
      document.getElementById("subsectionTitle").textContent = q.title;

      const list = document.getElementById("subsectionList");
      list.innerHTML = "";
      ["üìò –ë–∏–ª–µ—Ç—ã", "üßæ –≠–∫–∑–∞–º–µ–Ω", "üèÅ –ú–∞—Ä–∞—Ñ–æ–Ω"].forEach((sub, sIndex) => {
        const btn = document.createElement("button");
        btn.textContent = sub;
        btn.onclick = () => {
          if (sIndex === 0) openQuestion(index); // "–ë–∏–ª–µ—Ç—ã"
          else alert(`${sub} –≤ —Ä–∞–∑—Ä–∞–±–æ—Ç–∫–µ`);
        };
        list.appendChild(btn);
      });

      tg.BackButton.show();
    }

    function openQuestion(index) {
      const q = questions[index];
      document.getElementById("questionTitle").textContent = q.title;
      document.getElementById("questionText").textContent = q.question;

      const answersContainer = document.getElementById("answersContainer");
      answersContainer.innerHTML = "";
      q.answers.forEach((a, i) => {
        const btn = document.createElement("button");
        btn.textContent = a;
        btn.onclick = () => {
          if (i === q.correct) {
            btn.classList.add("correct");
          } else {
            btn.classList.add("wrong");
          }
        };
        answersContainer.appendChild(btn);
      });

      showPage("question");
      tg.BackButton.show();
    }

    tg.BackButton.onClick(() => {
      if (pages.question.classList.contains("active")) showPage("subsection");
      else if (pages.subsection.classList.contains("active")) showPage("group");
      else if (pages.group.classList.contains("active")) showPage("profession");
      else if (pages.profession.classList.contains("active")) showPage("home");
      else showPage("home");
      if (pages.home.classList.contains("active")) tg.BackButton.hide();
    });
  </script>
</body>
</html>
